modules:
  fs_hw:
    walk:
      - FS-ENTITY-MIB::fsFanState
      - FS-ENTITY-MIB::fsPowerState
      - FS-ENTITY-MIB::fsModuleTempState
      - FS-ENTITY-MIB::fsDevicePowerStatus
      - FS-SYSTEM-MIB::fsSystemElectricalSourceIsNormal
      - FS-SYSTEM-MIB::fsSystemFanIsNormal

    lookups:
      # Add labels for fan/PSU state (and drop table index labels)
      - source_indexes: [fsFanStateDeviceIndex, fsFanStateIndex]
        lookup: FS-ENTITY-MIB::fsFanStateFanDescr
        drop_source_indexes: true

      - source_indexes: [fsPowerStateDeviceIndex, fsPowerStateIndex]
        lookup: FS-ENTITY-MIB::fsPowerStatePowerDescr
        drop_source_indexes: true

      # Label PSU “is normal” entries with PSU name; drop the index
      - source_indexes: [fsSystemElectricalSourceIsNormalIndex]
        lookup: FS-SYSTEM-MIB::fsSystemElectricalSourceName
        drop_source_indexes: true

      # Optional: device/chassis label for fsDevicePowerStatus; drop the index
      - source_indexes: [fsDeviceInfoIndex]
        lookup: FS-ENTITY-MIB::fsDeviceInfoDescr
        drop_source_indexes: true

    overrides:
      # readable state labels
      FS-ENTITY-MIB::fsFanState:                        { type: EnumAsStateSet }
      FS-ENTITY-MIB::fsPowerState:                      { type: EnumAsStateSet }
      FS-ENTITY-MIB::fsModuleTempState:                 { type: EnumAsStateSet }
      FS-ENTITY-MIB::fsDevicePowerStatus:               { type: EnumAsStateSet }
      FS-SYSTEM-MIB::fsSystemElectricalSourceIsNormal:  { type: EnumAsStateSet }
      FS-SYSTEM-MIB::fsSystemFanIsNormal:               { type: EnumAsStateSet }

      # hide helper columns (used for lookups only)
      FS-ENTITY-MIB::fsFanStateFanDescr:                { ignore: true }
      FS-ENTITY-MIB::fsPowerStatePowerDescr:            { ignore: true }
      FS-SYSTEM-MIB::fsSystemElectricalSourceName:      { ignore: true }
      FS-ENTITY-MIB::fsDeviceInfoDescr:                 { ignore: true }

